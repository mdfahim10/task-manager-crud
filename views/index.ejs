<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Task Manager</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body class="bg-light">

<%- include("partials/navbar") %>

<div class="container mt-5">

    <div class="text-center mb-4">
        <h1 class="fw-bold">Task Dashboard</h1>
        <p class="text-muted">Manage your tasks efficiently</p>

        <a href="/tasks/new" class="btn btn-success mt-2">
            â• Create New Task
        </a>
    </div>

    <% if (tasks.length === 0) { %>
        <div class="alert alert-info text-center">
            No tasks yet. Start by creating one ğŸš€
        </div>
    <% } %>

    <div class="row justify-content-center">
        <div class="col-lg-8 col-md-10">

            <% for (task of tasks) { %>

                <div class="card shadow-sm mb-4">
                    <div class="card-body">

                        <div class="d-flex justify-content-between align-items-start">

                            <div>
                                <h5 class="fw-bold"><%= task.title %></h5>
                                <p class="text-muted mb-1"><%= task.description %></p>
                            </div>

                            <% if (task.status === "done") { %>
                                <span class="badge bg-success">Done</span>
                            <% } else { %>
                                <span class="badge bg-warning text-dark">Pending</span>
                            <% } %>

                        </div>

                        <small class="text-muted">
                            Created: <%= task.createdAt.toDateString() %>
                        </small>

                        <div class="d-flex gap-2 mt-3">

                            <a href="/tasks/<%= task.id %>" class="btn btn-outline-primary btn-sm">View</a>
                            <a href="/tasks/<%= task.id %>/edit" class="btn btn-outline-secondary btn-sm">Edit</a>

                            <form method="post" action="/tasks/<%= task.id %>" 
                                  onsubmit="return confirm('Are you sure you want to delete this task?')">

                                <input type="hidden" name="_method" value="DELETE">
                                <button class="btn btn-outline-danger btn-sm">Delete</button>
                            </form>

                        </div>

                    </div>
                </div>

            <% } %>

        </div>
    </div>

</div>

<%- include("partials/footer") %>

</body>
</html>
